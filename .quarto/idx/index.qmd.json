{"title":"An Analysis of Lichess Chess Matches","markdown":{"yaml":{"title":"An Analysis of Lichess Chess Matches","author":"Ana Luisa Bodevan","date":"11-05-2025","execute":{"warning":false,"message":false,"eval":true},"format":{"html":{"code-tools":true,"code-fold":true}},"toc":true},"headingText":"Technology and Data","containsRefs":false,"markdown":"\n\nThis is a project of data cleaning and analysis of data of +20.000 Lichess chess matches. The objective is to explore common matches patterns and identify variables that may influence in the match outcome.\n\n\n-   Python\n    -   Pandas, NumPy\n    -   Matplotlib, Plotly\n\nData is from the Chess Game Dataset (Lichess) on [Kaggle](https://www.kaggle.com/datasets/datasnaek/chess/data).\n\n### Data Description\n\n`Game ID`;\n\n`Rated` (T/F);\n\n`Start Time`; `End Time`;\n\n`Number of Turns`;\n\n`Game Status`; `Winner`;\n\n`Time Increment`;\n\n`White Player ID`; `White Player Rating`;\n\n`Black Player ID`; `Black Player Rating`;\n\n`All Moves in Standard Chess Notation`;\n\n`Opening Eco` (Standardised Code for any given opening); `Opening Name`; `Opening Ply` (Number of moves in the opening phase)\n\n## 0. Setup and Cleaning Data\n\nThe `data_cleaning.py` script cleaned the original `games.csv` dataset and saved it as `games_clean.csv`. The process was quick and easy, given that the data was already very well structured. There were no missing values, and the only necessary changes were cleaning out duplicate data and creating a column for openings without their variants, for simplicity.\n\n## 1. Descriptive Analysis\n\nThe `eda.py` script generated the insights presented. The following code load the necessary libraries, data and calculates the `rating_difference` variable.\n\n```{python}\n#| label: setup\n#| echo: true\nimport pandas as pd\nimport numpy as np\nimport seaborn as sns\nimport matplotlib.pyplot as plt\nimport plotly.express as px\n\n# Load Data\ndf = pd.read_csv('data/games_clean.csv')\n\n# Feature Engineering\ndf['rating_difference'] = df['white_rating'] - df['black_rating']\n```\n\n### 1.1 Summary Statistics\n\nThe table below provides a summary of the core numerical features, highlighting the central tendencies and spread of the data.\n\n```{python}\n#| label: descriptive-stats\n#| tbl-cap: \"Summary Statistics of Numerical Features\"\nnumerical_cols = ['turns', 'white_rating', 'black_rating', 'opening_ply', 'rating_difference']\ndf[numerical_cols].describe().round(2)\n```\n\n-   **Ratings**: The average rating for both players is high (around 1600), but the range is vast **288** points).\n\n-   **Game Length**: The mean game length is **61.06** turns (median 56), showing a slight positive skew (more short games than very long ones).\n\n-   **Rating Difference**: The mean difference is **7.79** (White - Black), suggesting White is, on average, the slightly higher-rated player. However, the large standard deviation **246.12** confirms significant rating disparities exist in many individual matchups.\n\n### 1.2 Feature Correlation\n\nThe correlation matrix reveals the linear relationships between the numerical variables.\n\n![](output/correlation_matrix_heatmap.png){fig-align=\"center\" width=\"687\"}\n\n-   **Player Matching:** The strongest correlation is between `white_rating` and `black_rating` (\\$\\\\mathbf{0.64}\\$), confirming that players are typically matched against opponents of a similar skill level.\n\n-   **Rating vs. Outcome Potential:** The `rating_difference` is strongly correlated with `white_rating` (0.42) and negatively correlated with `black_rating` (-0.43). This confirms the engineered feature is highly predictive of the rating skew towards one color.\n\n-   **Turns:** Game length has only a weak correlation with ratings (0.12 to 0.15).\n\n## 2. Game Outcome Analysis\n\n### 2.1 Winner and Victory Stats Distribution\n\n![](output/victory_winner_distributions.png)\n\n-   **Winner:** White wins the largest share of games, consistent with the first-move advantage in chess.\n\n-   **Victory Status:** **Resignation** is the most common end-game status, followed by **Checkmate**, suggesting players know they are rarely able to revert a losing position.\n\n### 2.2 Rating Influence on Outcome\n\nThe histogram below shows the distribution of the rating difference, separated by the winner.\n\n![](output/rating_difference_by_winner_hist.png){fig-align=\"center\" width=\"683\"}\n\nThe distributions are distinctly separated. The mass of the \"white\" wins is centered where White had a positive rating advantage, and the mass of the \"black\" wins is centered where Black had a positive rating advantage (negative rating difference). This visually confirms that the **higher-rated player is more likely to win**, regardless of color.\n\n### 2.3 Game Lenght by Victory Status\n\nThe box plot illustrates the typical number of turns required for each victory status.\n\n![](output/turns_by_victory_status_boxplot.png){fig-align=\"center\" width=\"798\"}\n\n**Observations:**\n\n-   **Longest Games:** Games ending in a **Draw** tend to be the longest (highest median and upper quartile), as balanced positions require extensive play.\n\n-   **Resignation/Mate:** These outcomes occur at a similar median game length, suggesting that decisive mistakes or tactical breakthroughs happen mid-game.\n\n## 3. Opening Analysis\n\n### 3.1 Top 10 Openings Winning Rate\n\n```{python}\n#| label: top-10-openings-win-rates-table\n#| tbl-cap: \"Winning Rates for Top 10 Most Frequent Openings (%)\"\ntop_openings = df['opening_name'].value_counts().nlargest(10).index.tolist()\ndf_top_openings = df[df['opening_name'].isin(top_openings)]\nopening_win_counts = df_top_openings.groupby('opening_name')['winner'].value_counts().unstack(fill_value=0)\ntotal_games = opening_win_counts.sum(axis=1)\nopening_win_rates = opening_win_counts.divide(total_games, axis=0) * 100\nopening_win_rates = opening_win_rates.sort_values(by='white', ascending=False)\nopening_win_rates[['white', 'black', 'draw']].round(2)\n```\n\n-   **White's Best:** The **Scandinavian Defense: Mieses-Kotroc Variation** heavily favors White, who wins **62.85** of the time.\n\n-   **Black's Best:** The **Van't Kruijs Opening** heavily favors Black, who wins **62%** of the time. This suggests that White's non-standard opening choice is often punished.\n\n## 4. Conclusions \n\nThe primary factor influencing the game outcome is the **rating difference** between the players, confirming that the higher-rated participant is statistically favored to win, regardless of playing color. White maintains a slight overall winning edge, supporting the notion of the first-move advantage.\n\nGame endings are predominantly characterized by **resignation** or **checkmate** rather than time or draw-related outcomes, indicating a decisive result is achieved in the majority of contests. Furthermore, the analysis of popular openings revealed substantial imbalances, with specific lines, such as the Scandinavian Defense: Mieses-Kotroc Variation and the Van't Kruijs Opening, showing stark bias toward one color.","srcMarkdownNoYaml":"\n\nThis is a project of data cleaning and analysis of data of +20.000 Lichess chess matches. The objective is to explore common matches patterns and identify variables that may influence in the match outcome.\n\n## Technology and Data\n\n-   Python\n    -   Pandas, NumPy\n    -   Matplotlib, Plotly\n\nData is from the Chess Game Dataset (Lichess) on [Kaggle](https://www.kaggle.com/datasets/datasnaek/chess/data).\n\n### Data Description\n\n`Game ID`;\n\n`Rated` (T/F);\n\n`Start Time`; `End Time`;\n\n`Number of Turns`;\n\n`Game Status`; `Winner`;\n\n`Time Increment`;\n\n`White Player ID`; `White Player Rating`;\n\n`Black Player ID`; `Black Player Rating`;\n\n`All Moves in Standard Chess Notation`;\n\n`Opening Eco` (Standardised Code for any given opening); `Opening Name`; `Opening Ply` (Number of moves in the opening phase)\n\n## 0. Setup and Cleaning Data\n\nThe `data_cleaning.py` script cleaned the original `games.csv` dataset and saved it as `games_clean.csv`. The process was quick and easy, given that the data was already very well structured. There were no missing values, and the only necessary changes were cleaning out duplicate data and creating a column for openings without their variants, for simplicity.\n\n## 1. Descriptive Analysis\n\nThe `eda.py` script generated the insights presented. The following code load the necessary libraries, data and calculates the `rating_difference` variable.\n\n```{python}\n#| label: setup\n#| echo: true\nimport pandas as pd\nimport numpy as np\nimport seaborn as sns\nimport matplotlib.pyplot as plt\nimport plotly.express as px\n\n# Load Data\ndf = pd.read_csv('data/games_clean.csv')\n\n# Feature Engineering\ndf['rating_difference'] = df['white_rating'] - df['black_rating']\n```\n\n### 1.1 Summary Statistics\n\nThe table below provides a summary of the core numerical features, highlighting the central tendencies and spread of the data.\n\n```{python}\n#| label: descriptive-stats\n#| tbl-cap: \"Summary Statistics of Numerical Features\"\nnumerical_cols = ['turns', 'white_rating', 'black_rating', 'opening_ply', 'rating_difference']\ndf[numerical_cols].describe().round(2)\n```\n\n-   **Ratings**: The average rating for both players is high (around 1600), but the range is vast **288** points).\n\n-   **Game Length**: The mean game length is **61.06** turns (median 56), showing a slight positive skew (more short games than very long ones).\n\n-   **Rating Difference**: The mean difference is **7.79** (White - Black), suggesting White is, on average, the slightly higher-rated player. However, the large standard deviation **246.12** confirms significant rating disparities exist in many individual matchups.\n\n### 1.2 Feature Correlation\n\nThe correlation matrix reveals the linear relationships between the numerical variables.\n\n![](output/correlation_matrix_heatmap.png){fig-align=\"center\" width=\"687\"}\n\n-   **Player Matching:** The strongest correlation is between `white_rating` and `black_rating` (\\$\\\\mathbf{0.64}\\$), confirming that players are typically matched against opponents of a similar skill level.\n\n-   **Rating vs. Outcome Potential:** The `rating_difference` is strongly correlated with `white_rating` (0.42) and negatively correlated with `black_rating` (-0.43). This confirms the engineered feature is highly predictive of the rating skew towards one color.\n\n-   **Turns:** Game length has only a weak correlation with ratings (0.12 to 0.15).\n\n## 2. Game Outcome Analysis\n\n### 2.1 Winner and Victory Stats Distribution\n\n![](output/victory_winner_distributions.png)\n\n-   **Winner:** White wins the largest share of games, consistent with the first-move advantage in chess.\n\n-   **Victory Status:** **Resignation** is the most common end-game status, followed by **Checkmate**, suggesting players know they are rarely able to revert a losing position.\n\n### 2.2 Rating Influence on Outcome\n\nThe histogram below shows the distribution of the rating difference, separated by the winner.\n\n![](output/rating_difference_by_winner_hist.png){fig-align=\"center\" width=\"683\"}\n\nThe distributions are distinctly separated. The mass of the \"white\" wins is centered where White had a positive rating advantage, and the mass of the \"black\" wins is centered where Black had a positive rating advantage (negative rating difference). This visually confirms that the **higher-rated player is more likely to win**, regardless of color.\n\n### 2.3 Game Lenght by Victory Status\n\nThe box plot illustrates the typical number of turns required for each victory status.\n\n![](output/turns_by_victory_status_boxplot.png){fig-align=\"center\" width=\"798\"}\n\n**Observations:**\n\n-   **Longest Games:** Games ending in a **Draw** tend to be the longest (highest median and upper quartile), as balanced positions require extensive play.\n\n-   **Resignation/Mate:** These outcomes occur at a similar median game length, suggesting that decisive mistakes or tactical breakthroughs happen mid-game.\n\n## 3. Opening Analysis\n\n### 3.1 Top 10 Openings Winning Rate\n\n```{python}\n#| label: top-10-openings-win-rates-table\n#| tbl-cap: \"Winning Rates for Top 10 Most Frequent Openings (%)\"\ntop_openings = df['opening_name'].value_counts().nlargest(10).index.tolist()\ndf_top_openings = df[df['opening_name'].isin(top_openings)]\nopening_win_counts = df_top_openings.groupby('opening_name')['winner'].value_counts().unstack(fill_value=0)\ntotal_games = opening_win_counts.sum(axis=1)\nopening_win_rates = opening_win_counts.divide(total_games, axis=0) * 100\nopening_win_rates = opening_win_rates.sort_values(by='white', ascending=False)\nopening_win_rates[['white', 'black', 'draw']].round(2)\n```\n\n-   **White's Best:** The **Scandinavian Defense: Mieses-Kotroc Variation** heavily favors White, who wins **62.85** of the time.\n\n-   **Black's Best:** The **Van't Kruijs Opening** heavily favors Black, who wins **62%** of the time. This suggests that White's non-standard opening choice is often punished.\n\n## 4. Conclusions \n\nThe primary factor influencing the game outcome is the **rating difference** between the players, confirming that the higher-rated participant is statistically favored to win, regardless of playing color. White maintains a slight overall winning edge, supporting the notion of the first-move advantage.\n\nGame endings are predominantly characterized by **resignation** or **checkmate** rather than time or draw-related outcomes, indicating a decisive result is achieved in the majority of contests. Furthermore, the analysis of popular openings revealed substantial imbalances, with specific lines, such as the Scandinavian Defense: Mieses-Kotroc Variation and the Van't Kruijs Opening, showing stark bias toward one color."},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":"auto","echo":true,"output":true,"warning":false,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"message":false,"engine":"jupyter"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":true,"code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":true,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","toc":true,"output-file":"index.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","appendix-view-license":"View License","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words","listing-page-filter":"Filter","draft":"Draft"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.7.32","resources":["fonts/*"],"theme":["litera","custom.scss"],"page-layout":"article","grid":{"sidebar-width":"250px","body-width":"900px","margin-width":"200px"},"title":"An Analysis of Lichess Chess Matches","author":"Ana Luisa Bodevan","date":"11-05-2025"},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}